import{a as m}from"./index-CmmzNXUp.js";import{B as S}from"./Button-6hWhDUK7.js";import{q as C,a2 as b,r as i,Q as B,_ as V,R as c,o as f,m as a,h as n,S as g,g as x,l as t,T as u,k as v,O as z}from"./app-CLJvurN3.js";import{N as O}from"./Tag-CGBAGwae.js";import{N as j}from"./Alert-DzKHEb0O.js";import{N as I}from"./Input-DhYCGtaB.js";const P=C({__name:"Token",setup(k,{expose:r}){r();const s=b({phone:"",password:"",verify_code:""}),e=i(),p=i(),d=i(),o=i(),y=i();async function _(){d.value=!0;const l=await(await fetch(`${m()}/alist/wopan/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();if(d.value=!1,l.error){e.value=l.error;return}}async function T(){o.value=!0;const l=await(await fetch(`${m()}/alist/wopan/verify_code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();if(o.value=!1,l.error){p.value=l.error;return}y.value=l}const N={input:s,err1:e,err2:p,loading1:d,loading2:o,token:y,getVerifyCode:_,getToken:T,get NInput(){return I},get NSpace(){return B},get NButton(){return S},get NAlert(){return j},get NTag(){return O}};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}});function h(k,r,s,e,p,d){return f(),c(e.NSpace,{size:"large",vertical:""},{default:a(()=>[n(e.NInput,{size:"large",placeholder:"Phone number",value:e.input.phone,"onUpdate:value":r[0]||(r[0]=o=>e.input.phone=o)},null,8,["value"]),n(e.NInput,{size:"large",placeholder:"Password",value:e.input.password,"onUpdate:value":r[1]||(r[1]=o=>e.input.password=o),type:"password"},null,8,["value"]),n(e.NButton,{type:"primary",secondary:"",size:"large",block:"",onClick:e.getVerifyCode,loading:e.loading1},{default:a(()=>r[3]||(r[3]=[t("Get Verify Code ")])),_:1},8,["loading"]),e.err1?(f(),c(e.NAlert,{key:0,title:"Error",type:"error"},{default:a(()=>[t(u(e.err1),1)]),_:1})):g("",!0),n(e.NInput,{size:"large",placeholder:"Verify code",value:e.input.verify_code,"onUpdate:value":r[2]||(r[2]=o=>e.input.verify_code=o)},null,8,["value"]),n(e.NButton,{type:"primary",size:"large",block:"",onClick:e.getToken,loading:e.loading2},{default:a(()=>r[4]||(r[4]=[t("Get Token")])),_:1},8,["loading"]),e.err2?(f(),c(e.NAlert,{key:1,title:"Error",type:"error"},{default:a(()=>[t(u(e.err2),1)]),_:1})):g("",!0),e.token?(f(),x(z,{key:2},[v("div",null,[r[5]||(r[5]=t("refresh_token: ")),n(e.NTag,{bordered:!1,type:"info"},{default:a(()=>[t(u(e.token.refresh_token),1)]),_:1})]),v("div",null,[r[6]||(r[6]=t("access_token: ")),n(e.NTag,{bordered:!1,type:"info"},{default:a(()=>[t(u(e.token.access_token),1)]),_:1})])],64)):g("",!0)]),_:1})}const D=V(P,[["render",h],["__file","Token.vue"]]);export{D as T};
