import{q as y,r as S,a8 as g,Q as x,_ as h,R as i,o as s,m as p,l as d,T as _,k as t,S as v,h as w}from"./app-CLJvurN3.js";import{N as C}from"./Input-DhYCGtaB.js";import{N as P}from"./Alert-DzKHEb0O.js";const m="a78d5a69054042fa936f6c77f9a0ae8b",u="9c119bbb04b346d2a52aa64401936b2b",A="https://alist.example.com/tool/yandex/callback",I=y({__name:"Callback",setup(b,{expose:r}){r();const a=new URL(window.location.href),e=a.searchParams.get("code"),f=a.searchParams.get("error"),k=a.searchParams.get("error_description"),o=S(),n=async()=>{const c=new URLSearchParams;c.append("grant_type","authorization_code"),c.append("client_id",m),c.append("client_secret",u),c.append("code",e||"");const N=await(await fetch("https://oauth.yandex.com/token",{method:"POST",body:c})).json();o.value=N};e&&!f&&n();const l={client_id:m,client_secret:u,callback_uri:A,url:a,code:e,error:f,error_description:k,token:o,getToken:n,get NAlert(){return P},get NSpace(){return x},get NSpin(){return g},get NInput(){return C}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function T(b,r,a,e,f,k){return!e.code||e.error?(s(),i(e.NAlert,{key:0,title:e.error||"Error",type:"error"},{default:p(()=>[d(_(e.error_description),1)]),_:1},8,["title"])):(s(),i(e.NSpace,{key:1,vertical:"",size:"large"},{default:p(()=>{var o,n,l;return[t("p",null,[r[0]||(r[0]=t("b",null,"client_id: ",-1)),d(_(e.client_id))]),t("p",null,[r[1]||(r[1]=t("b",null,"client_secret: ",-1)),d(_(e.client_secret))]),t("p",null,[r[2]||(r[2]=t("b",null,"redirect_uri: ",-1)),d(_(e.callback_uri))]),(o=e.token)!=null&&o.error||(n=e.token)!=null&&n.error_description?(s(),i(e.NAlert,{key:0,title:(l=e.token)==null?void 0:l.error,type:"error"},{default:p(()=>[d(_(e.token.error_description),1)]),_:1},8,["title"])):v("",!0),w(e.NSpace,{vertical:""},{default:p(()=>[r[3]||(r[3]=t("b",null,"refresh_token:",-1)),e.token?(s(),i(e.NInput,{key:1,type:"textarea",autosize:"",readonly:"",value:e.token.refresh_token},null,8,["value"])):(s(),i(e.NSpin,{key:0}))]),_:1})]}),_:1}))}const j=h(I,[["render",T],["__scopeId","data-v-57fa4a0f"],["__file","Callback.vue"]]);export{j as C};
